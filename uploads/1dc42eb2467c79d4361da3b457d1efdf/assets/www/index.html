<!DOCTYPE html>
<html class="finapp-html" lang="en" data-media-queries="enabled">
    <head>
        <meta charset="utf-8">
        <title>Financial Fitness App</title>
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" /> 
        
        <link rel="stylesheet" src="css/application.css"/>

        <script type="text/javascript">
			window.yo = {};//define global yo var
			
			/** yo.when waits until specified global function/dependency exists
			 *	@param{String} name is name of global var to check for or also support one level of dot operation
			 *  @param{Object} callback is function to call afterwards
			 *  @param{Object} arguments to pass to function  
			 * */
			yo.when = function(name,callback,args){
			
				console.log('waiting for:'+name);
				var i,nameArr,undef=false;
				nameArr = name.replace(/ /g,'').split(',');
				for(i=0;i<nameArr.length;i++){
				 	//add support for handling simple . syntax once
				 	if(nameArr[i].indexOf('.')!=-1){
				 		if(typeof(window[nameArr[i].substring(0,nameArr[i].indexOf('.'))][nameArr[i].substring(nameArr[i].indexOf('.')+1)])=="undefined"){
				            undef=true;
				        }
				 	}else if(typeof(window[nameArr[i]])=="undefined"){
			            undef=true;
			        }
				}
				if(!undef){
			        callback.call(args);
			    }else{
			        setTimeout(function(){yo.when(name,callback,args);},100);
			    }
			};
			
			/**yo.require saves us from typing this over and over again to get files
			 *@param{String} url 
			 */
			yo.require = function(url){
				var fileref = document.createElement('script');
			    fileref.setAttribute("type", "text/javascript");
			    fileref.setAttribute("src", url);
			    document.body.appendChild(fileref);
			};
			/**
			 * get values form the URL, added function to help set cobId initially
			 *  
			 */
			yo.getValFromURL = function(name,defaultVal){
			 	var val = window.location.href;
					if(val.indexOf(name)!=-1&&val.indexOf('\?')!=-1){
						val = val.substring(val.indexOf(name));
						if(val.indexOf('\&')==-1&&val.indexOf('\?')!=-1){
							val = val.substring(val.indexOf('\=')+1,val.indexOf('\?'));
						}else{
							val = val.substring(val.indexOf('\=')+1,val.indexOf('\&'));
						}
						val = val.replace('#','');
					}else{
						val = defaultVal;//if they didn't supply one then for debugging put the y.com one
					}
				return val;
			};
			PARAM = {//need to get these from context but for right now just hard coding to deal with the lack thereof
				isMobile:true
				, instance: ""
				, resturl: "http://192.168.210.82:8180/moneycenter/srest/yodlee"
				, status: "published"
				, token: "5a7384a8ebd40eaa5d4a14ed255df2b05e76c426747456bc7ab090ca84dd01a0"
				, version: "src"
				, locationurl: ""
				, appName: "Next Gen UX"
				, restServer: "192.168.200.184:3000"/*for debugging and testing until Mani gets his part in*/
			};
			if(!PARAM.brand||PARAM.brand=='default'){
				PARAM.brand = yo.getValFromURL('brand','10000004');
			}
			if(!PARAM.id){
				PARAM.id = yo.getValFromURL('id','10003204');
			}
			yo.width = window.innerWidth || document.documentElement.clientWidth;
			PARAM.apiKey = yo.getValFromURL('apiKey','QGVC46MKVHW8RPKM38XK');
			
			//hard coded for now need to get from user context eventually:
			
			PARAM.prefs={"dateFormat":"MM/dd/yyyy","currencyCode":"USD","currencyNotation":"TEXTSYMBOL","currencySymbol":"$","decimalSeparator":".","groupingSeparator":",","groupPattern":"###,##0.##","groupSize":"3", "locale": "en_US"};
			
			var link = document.createElement('link');
			link.setAttribute("rel", "stylesheet");
			link.setAttribute("type", "text/css");
			link.href="css/application.css";
			var head = document.head || document.getElementsByTagName("head")[0];
			head.appendChild(link);
			var css = document.createElement('style');
			css.setAttribute("type", "text/css");//used by foundation
			if (css.styleSheet) css.styleSheet.cssText = '';//don't need to load sprite in mobile
			else css.appendChild(document.createTextNode(''));
			head.appendChild(css);
			
			Application = {};
		</script>
		
    </head>
    <body class="loading mobile-main">
    	<div id="overlay-js" class="modal-backdrop hide">&nbsp;</div>
    	<div id="main-container"></div>
        <script type="text/javascript" charset="utf-8">
			document.body.innerHTML+='<div id="load" class="load"><span tabindex="0" id="load-text" class="ada-hidden">Loading, please wait</span><i>Loading</i></div>';
			
			yo.require("js/params.js");
			yo.require("locale/cob_key_en_US.js");
			yo.when('__',function(){
				yo.require("js/core.js");
				
			});
			
        </script>
        
        <script type="text/javascript" charset="utf-8" src="js/ext/fastclick.js"></script>

        <script type="text/javascript" charset="utf-8" src="js/components/toggles/toggles.js"></script> <!-- Do not load upfront -->
        <!--script type="text/javascript" charset="utf-8" src="js/components/infiniteScroll/infinite_scroll_class.js"></script need to debug later-->

        <script type="text/javascript" charset="utf-8" src="js/modules/editAccount/modal.js"></script>  <!-- Do not load upfront -->
    </body>
</html>
